<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Afi's Love to Ilyan</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,500;0,600;1,400&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --black: #111111;
            --white: #fefefe;
            --gray-light: #f5f5f5;
            --gray-medium: #d0d0d0;
            --gray-dark: #555555;
            --transition: all 0.5s cubic-bezier(0.16, 1, 0.3, 1);
            --radius: 12px;
            --spacing-xs: 0.5rem;
            --spacing-sm: 1rem;
            --spacing-md: 2rem;
            --spacing-lg: 4rem;
            --spacing-xl: 6rem;
        }

        body {
            font-family: 'Inter', sans-serif;
            color: var(--black);
            background-color: var(--white);
            line-height: 1.6;
            overflow-x: hidden;
            min-height: 100vh;
            padding: var(--spacing-md);
            max-width: 1200px;
            margin: 0 auto;
        }

        .container {
            opacity: 1;
            transition: var(--transition);
            min-height: 90vh;
            display: flex;
            flex-direction: column;
        }

        .container.fade-out {
            opacity: 0;
            transform: translateY(20px);
        }

        .container.fade-in {
            animation: fadeIn 1.2s ease-out forwards;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        header {
            text-align: center;
            margin-bottom: var(--spacing-xl);
            padding-top: var(--spacing-lg);
        }

        h1 {
            font-family: 'Playfair Display', serif;
            font-weight: 500;
            font-size: 3.5rem;
            letter-spacing: -0.02em;
            margin-bottom: var(--spacing-sm);
            line-height: 1.1;
        }

        .subtitle {
            font-family: 'Inter', sans-serif;
            font-weight: 300;
            font-size: 1.1rem;
            color: var(--gray-dark);
            letter-spacing: 0.05em;
            text-transform: uppercase;
            margin-bottom: var(--spacing-xl);
        }

        .landing-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 60vh;
            text-align: center;
            padding: var(--spacing-lg) 0;
        }

        .button {
            font-family: 'Inter', sans-serif;
            font-weight: 400;
            font-size: 1rem;
            background-color: var(--black);
            color: var(--white);
            border: none;
            padding: 1rem 2.5rem;
            border-radius: var(--radius);
            cursor: pointer;
            transition: var(--transition);
            letter-spacing: 0.05em;
            text-transform: uppercase;
            margin-top: var(--spacing-md);
        }

        .button:hover {
            background-color: var(--gray-dark);
            transform: translateY(-2px);
        }

        .button:active {
            transform: translateY(0);
        }

        .camera-section {
            display: none;
            flex-direction: column;
            align-items: center;
            width: 100%;
            max-width: 800px;
            margin: 0 auto;
            padding-top: var(--spacing-lg);
        }

        .camera-container {
            width: 100%;
            max-width: 600px;
            height: 400px;
            background-color: var(--gray-light);
            border-radius: var(--radius);
            overflow: hidden;
            margin-bottom: var(--spacing-lg);
            position: relative;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
        }

        #camera-preview {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: none;
        }

        .camera-placeholder {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: var(--gray-dark);
        }

        .camera-icon {
            font-size: 3rem;
            margin-bottom: var(--spacing-sm);
            opacity: 0.7;
        }

        .camera-controls {
            display: flex;
            gap: var(--spacing-sm);
            margin-top: var(--spacing-md);
        }

        .capture-button {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: var(--white);
            border: 2px solid var(--gray-medium);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .capture-button:hover {
            border-color: var(--black);
        }

        .capture-inner {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background-color: var(--black);
        }

        .result-section {
            display: none;
            flex-direction: column;
            align-items: center;
            width: 100%;
            max-width: 800px;
            margin: 0 auto;
            padding-top: var(--spacing-lg);
        }

        .photo-container {
            width: 100%;
            max-width: 600px;
            border-radius: var(--radius);
            overflow: hidden;
            margin-bottom: var(--spacing-xl);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
        }

        #captured-photo {
            width: 100%;
            height: auto;
            display: block;
            filter: grayscale(100%) contrast(110%);
        }

        .poem-container {
            width: 100%;
            max-width: 600px;
            padding: var(--spacing-lg);
            margin-bottom: var(--spacing-xl);
        }

        .poem-title {
            font-family: 'Playfair Display', serif;
            font-weight: 500;
            font-size: 1.8rem;
            margin-bottom: var(--spacing-md);
            text-align: center;
        }

        .poem {
            font-family: 'Inter', sans-serif;
            font-weight: 300;
            font-size: 1.1rem;
            line-height: 1.8;
            color: var(--black);
            text-align: center;
            white-space: pre-line;
        }

        .poem-line {
            margin-bottom: var(--spacing-md);
            opacity: 0;
            transform: translateY(10px);
            animation: lineAppear 0.8s ease forwards;
        }

        @keyframes lineAppear {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .footer-note {
            font-family: 'Inter', sans-serif;
            font-weight: 300;
            font-size: 0.9rem;
            color: var(--gray-dark);
            text-align: center;
            margin-top: var(--spacing-xl);
            padding-bottom: var(--spacing-lg);
        }

        .back-button {
            margin-top: var(--spacing-md);
            background-color: transparent;
            color: var(--black);
            border: 1px solid var(--gray-medium);
        }

        .back-button:hover {
            background-color: var(--gray-light);
        }

        @media (max-width: 768px) {
            body {
                padding: var(--spacing-sm);
            }
            
            h1 {
                font-size: 2.5rem;
            }
            
            .camera-container, .photo-container {
                height: 300px;
            }
            
            .poem-container {
                padding: var(--spacing-md);
            }
            
            .poem {
                font-size: 1rem;
            }
        }

        @media (max-width: 480px) {
            h1 {
                font-size: 2rem;
            }
            
            .subtitle {
                font-size: 0.9rem;
            }
            
            .camera-container, .photo-container {
                height: 250px;
            }
        }
    </style>
</head>
<body>
    <div class="container fade-in" id="main-container">
        <header>
            <h1>Afi's Love to Ilyan</h1>
            <div class="subtitle">A Timeless Devotion</div>
        </header>
        
        <section class="landing-content" id="landing-section">
            <p style="margin-bottom: var(--spacing-md); color: var(--gray-dark); max-width: 500px;">
                Capture a moment to reveal a poem born from sincere love,<br>
                composed in quiet tones of devotion and longing.
            </p>
            <button class="button" id="open-camera-btn">Open Camera</button>
        </section>
        
        <section class="camera-section" id="camera-section">
            <div class="camera-container">
                <video id="camera-preview" autoplay playsinline></video>
                <div class="camera-placeholder" id="camera-placeholder">
                    <div class="camera-icon">ðŸ“·</div>
                    <p>Camera ready to capture your moment</p>
                </div>
            </div>
            <div class="camera-controls">
                <div class="capture-button" id="capture-btn">
                    <div class="capture-inner"></div>
                </div>
            </div>
            <button class="button back-button" id="back-from-camera-btn">Return</button>
        </section>
        
        <section class="result-section" id="result-section">
            <div class="photo-container">
                <img id="captured-photo" alt="Captured moment">
            </div>
            
            <div class="poem-container">
                <h2 class="poem-title">For Ilyan, With All That Is Timeless</h2>
                <div class="poem" id="poem">
                    <!-- Poem will be generated here -->
                </div>
            </div>
            
            <button class="button back-button" id="back-from-result-btn">Capture Another Moment</button>
            
            <div class="footer-note">
                This moment, like love, exists beyond time.<br>
                For Ilyan, from Afi â€” with a quiet heart.
            </div>
        </section>
    </div>

    <script>
        // DOM Elements
        const landingSection = document.getElementById('landing-section');
        const cameraSection = document.getElementById('camera-section');
        const resultSection = document.getElementById('result-section');
        const mainContainer = document.getElementById('main-container');
        const openCameraBtn = document.getElementById('open-camera-btn');
        const backFromCameraBtn = document.getElementById('back-from-camera-btn');
        const backFromResultBtn = document.getElementById('back-from-result-btn');
        const captureBtn = document.getElementById('capture-btn');
        const cameraPreview = document.getElementById('camera-preview');
        const cameraPlaceholder = document.getElementById('camera-placeholder');
        const capturedPhoto = document.getElementById('captured-photo');
        const poemElement = document.getElementById('poem');
        
        // Camera stream variable
        let cameraStream = null;
        
        // Poems database
        const poems = [
            `In the quiet spaces between thoughts,
            your name resides â€” a gentle constant.
            
            Not with fireworks or declarations,
            but with the steady rhythm of a heart
            that has found its true north.
            
            I carry your presence like a secret warmth,
            a layer beneath skin, deeper than bone.
            
            When the world grows loud and frantic,
            I return to the thought of you â€” 
            a still point in turning time.
            
            This love does not demand or cling,
            it simply is, as sunlight is to day.
            
            It exists in the mundane and the monumental,
            in shared silence and understood glances.
            
            Wherever you are, whatever you become,
            my devotion remains â€” quiet, certain, complete.
            
            For in you, I have found not just a love,
            but a home for my soul's quietest truths.`,

            `Some loves are whispers, not shouts â€”
            and mine for you is the softest sound.
            
            It lives in the way I see your shadow
            in every beautiful thing I encounter.
            
            Not a tempest, but a deep river,
            flowing steadily toward an endless sea.
            
            I find you in the morning light,
            in the pattern of rain on windows,
            in the space between heartbeats.
            
            Time may fold and years may pass,
            but this affection only deepens its roots.
            
            It asks for nothing but your existence,
            and gives everything without measure.
            
            My love is not a cage but an open sky â€”
            vast enough for all you are and will be.
            
            And if forever exists in any form,
            it is here, in this quiet devotion to you.`,

            `There is a map of you in my mind,
            drawn not with lines but with memories
            of how light falls across your shoulders.
            
            This love is not dramatic or demanding,
            it is the background music to my days.
            
            A steady, gentle hum that reminds me
            that somewhere, you are breathing,
            and that alone makes the world right.
            
            I do not need to possess you to love you;
            your freedom is as precious as your presence.
            
            My devotion is a patient, quiet thing â€”
            it will wait through seasons and silences.
            
            For your essence has woven itself
            into the very fabric of my being.
            
            And in this lifetime, or any that may follow,
            I will recognize your soul â€” my constant,
            my calm, my most sincere belonging.`
        ];
        
        // Event Listeners
        openCameraBtn.addEventListener('click', openCamera);
        backFromCameraBtn.addEventListener('click', goBackToLanding);
        backFromResultBtn.addEventListener('click', goBackToCamera);
        captureBtn.addEventListener('click', capturePhoto);
        
        // Functions
        function openCamera() {
            // Fade out landing page
            mainContainer.classList.add('fade-out');
            
            setTimeout(() => {
                // Hide landing, show camera
                landingSection.style.display = 'none';
                cameraSection.style.display = 'flex';
                
                // Fade in camera section
                setTimeout(() => {
                    mainContainer.classList.remove('fade-out');
                    mainContainer.classList.add('fade-in');
                }, 50);
                
                // Start camera
                startCamera();
            }, 500);
        }
        
        function goBackToLanding() {
            // Stop camera if active
            stopCamera();
            
            // Fade out camera section
            mainContainer.classList.add('fade-out');
            
            setTimeout(() => {
                // Hide camera, show landing
                cameraSection.style.display = 'none';
                landingSection.style.display = 'flex';
                
                // Fade in landing section
                setTimeout(() => {
                    mainContainer.classList.remove('fade-out');
                    mainContainer.classList.add('fade-in');
                }, 50);
            }, 500);
        }
        
        function goBackToCamera() {
            // Fade out result section
            mainContainer.classList.add('fade-out');
            
            setTimeout(() => {
                // Hide result, show camera
                resultSection.style.display = 'none';
                cameraSection.style.display = 'flex';
                
                // Fade in camera section
                setTimeout(() => {
                    mainContainer.classList.remove('fade-out');
                    mainContainer.classList.add('fade-in');
                }, 50);
                
                // Restart camera
                startCamera();
            }, 500);
        }
        
        async function startCamera() {
            try {
                // Get camera stream
                cameraStream = await navigator.mediaDevices.getUserMedia({ 
                    video: { facingMode: 'environment' },
                    audio: false 
                });
                
                // Show camera preview
                cameraPreview.srcObject = cameraStream;
                cameraPreview.style.display = 'block';
                cameraPlaceholder.style.display = 'none';
            } catch (error) {
                console.error('Error accessing camera:', error);
                cameraPlaceholder.innerHTML = '<p>Camera unavailable. Using placeholder.</p>';
                
                // Simulate camera for demo purposes
                setTimeout(() => {
                    cameraPlaceholder.innerHTML = `
                        <div class="camera-icon">ðŸ“¸</div>
                        <p>Demo mode active. Click capture to continue.</p>
                    `;
                }, 1000);
            }
        }
        
        function stopCamera() {
            if (cameraStream) {
                cameraStream.getTracks().forEach(track => track.stop());
                cameraStream = null;
            }
            cameraPreview.style.display = 'none';
            cameraPlaceholder.style.display = 'flex';
        }
        
        function capturePhoto() {
            // Fade out camera section
            mainContainer.classList.add('fade-out');
            
            setTimeout(() => {
                // Hide camera, show result
                cameraSection.style.display = 'none';
                resultSection.style.display = 'flex';
                
                // Stop camera
                stopCamera();
                
                // Generate a photo (in a real app, this would capture from the video)
                generatePhoto();
                
                // Generate a poem
                generatePoem();
                
                // Fade in result section
                setTimeout(() => {
                    mainContainer.classList.remove('fade-out');
                    mainContainer.classList.add('fade-in');
                }, 50);
            }, 500);
        }
        
        function generatePhoto() {
            // In a real application, this would capture a frame from the video stream
            // For this demo, we'll create a gradient placeholder with a monochrome filter
            
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            
            // Set canvas dimensions
            canvas.width = 600;
            canvas.height = 400;
            
            // Create a gradient background
            const gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
            gradient.addColorStop(0, '#f0f0f0');
            gradient.addColorStop(1, '#d0d0d0');
            
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Add some soft circular elements
            ctx.fillStyle = 'rgba(255, 255, 255, 0.7)';
            ctx.beginPath();
            ctx.arc(150, 150, 80, 0, Math.PI * 2);
            ctx.fill();
            
            ctx.fillStyle = 'rgba(200, 200, 200, 0.5)';
            ctx.beginPath();
            ctx.arc(450, 250, 120, 0, Math.PI * 2);
            ctx.fill();
            
            // Convert to data URL and set as image source
            capturedPhoto.src = canvas.toDataURL('image/jpeg');
        }
        
        function generatePoem() {
            // Clear previous poem
            poemElement.innerHTML = '';
            
            // Select a random poem
            const randomPoem = poems[Math.floor(Math.random() * poems.length)];
            const lines = randomPoem.split('\n\n');
            
            // Add each line with a staggered animation
            lines.forEach((line, index) => {
                const lineElement = document.createElement('div');
                lineElement.className = 'poem-line';
                lineElement.textContent = line;
                poemElement.appendChild(lineElement);
                
                // Stagger the animation
                setTimeout(() => {
                    lineElement.style.animationDelay = `${index * 0.2}s`;
                }, 10);
            });
        }
        
        // Initialize with a fade in effect
        window.addEventListener('load', () => {
            mainContainer.classList.add('fade-in');
        });
    </script>
</body>
</html>
