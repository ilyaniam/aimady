<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Afi's Love to Ilyan</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;700&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --black: #111111;
            --white: #f9f9f9;
            --gray-light: #e8e8e8;
            --gray-medium: #8a8a8a;
            --gray-dark: #3a3a3a;
            --border-radius: 16px;
            --transition-slow: 1.2s ease;
            --transition-medium: 0.8s ease;
            --transition-fast: 0.4s ease;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--white);
            color: var(--black);
            line-height: 1.6;
            overflow-x: hidden;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 24px;
        }

        /* Landing Page */
        .landing-page {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: linear-gradient(135deg, var(--white) 0%, var(--gray-light) 100%);
            position: relative;
            overflow: hidden;
        }

        .landing-page::before {
            content: '';
            position: absolute;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle at center, transparent 30%, var(--gray-light) 70%);
            opacity: 0.3;
            animation: pulse 20s infinite alternate;
        }

        @keyframes pulse {
            0% { transform: translate(-5%, -5%) scale(1); }
            100% { transform: translate(5%, 5%) scale(1.05); }
        }

        .title {
            font-family: 'Playfair Display', serif;
            font-size: clamp(2.5rem, 5vw, 4.5rem);
            font-weight: 700;
            text-align: center;
            margin-bottom: 1.5rem;
            letter-spacing: -0.02em;
            z-index: 2;
            opacity: 0;
            animation: fadeInUp var(--transition-slow) forwards;
        }

        .subtitle {
            font-family: 'Inter', sans-serif;
            font-size: clamp(1rem, 2vw, 1.3rem);
            font-weight: 300;
            text-align: center;
            max-width: 600px;
            margin: 0 auto 3rem;
            color: var(--gray-dark);
            line-height: 1.7;
            z-index: 2;
            opacity: 0;
            animation: fadeInUp var(--transition-slow) 0.3s forwards;
        }

        .btn {
            font-family: 'Inter', sans-serif;
            font-size: 1.1rem;
            font-weight: 400;
            background-color: transparent;
            color: var(--black);
            border: 1.5px solid var(--black);
            border-radius: var(--border-radius);
            padding: 16px 40px;
            cursor: pointer;
            transition: all var(--transition-fast);
            z-index: 2;
            opacity: 0;
            animation: fadeInUp var(--transition-slow) 0.6s forwards;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background-color: var(--black);
            transition: left var(--transition-medium);
            z-index: -1;
        }

        .btn:hover {
            color: var(--white);
        }

        .btn:hover::before {
            left: 0;
        }

        /* Camera System */
        .camera-section {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 60px 24px;
            display: none;
            opacity: 0;
        }

        .camera-container {
            width: 100%;
            max-width: 800px;
            margin-bottom: 40px;
            border-radius: var(--border-radius);
            overflow: hidden;
            position: relative;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
        }

        #camera-preview {
            width: 100%;
            height: 500px;
            background-color: var(--gray-dark);
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .camera-placeholder {
            text-align: center;
            color: var(--white);
            font-family: 'Inter', sans-serif;
            font-weight: 300;
            font-size: 1.1rem;
        }

        .camera-placeholder svg {
            width: 60px;
            height: 60px;
            margin-bottom: 20px;
            fill: var(--white);
            opacity: 0.7;
        }

        #video {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: none;
        }

        #capture-btn {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background-color: var(--white);
            border: 3px solid var(--black);
            cursor: pointer;
            transition: all var(--transition-fast);
            display: none;
        }

        #capture-btn:hover {
            transform: translateX(-50%) scale(1.05);
        }

        #capture-btn:active {
            transform: translateX(-50%) scale(0.95);
        }

        /* Photo Display */
        .photo-container {
            width: 100%;
            max-width: 700px;
            margin: 0 auto 60px;
            display: none;
            opacity: 0;
        }

        .photo-frame {
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.1);
            transform: translateY(20px);
            transition: transform var(--transition-medium), opacity var(--transition-medium);
        }

        #captured-photo {
            width: 100%;
            display: block;
            filter: grayscale(100%) contrast(110%);
        }

        /* Love Meter */
        .love-meter-section {
            max-width: 800px;
            margin: 0 auto 80px;
            display: none;
            opacity: 0;
        }

        .love-meter-title {
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 40px;
            letter-spacing: -0.02em;
        }

        .love-percentage {
            font-family: 'Playfair Display', serif;
            font-size: clamp(3rem, 8vw, 6rem);
            font-weight: 700;
            text-align: center;
            margin-bottom: 20px;
            min-height: 140px;
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transform: translateY(20px);
        }

        .love-description {
            font-family: 'Inter', sans-serif;
            font-size: 1.4rem;
            font-weight: 300;
            text-align: center;
            color: var(--gray-dark);
            font-style: italic;
            opacity: 0;
            transform: translateY(20px);
        }

        /* Poem */
        .poem-section {
            max-width: 700px;
            margin: 0 auto 100px;
            display: none;
            opacity: 0;
        }

        .poem-title {
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 50px;
            letter-spacing: -0.02em;
        }

        .poem-content {
            font-family: 'Inter', sans-serif;
            font-size: 1.2rem;
            font-weight: 300;
            line-height: 1.9;
            color: var(--gray-dark);
            white-space: pre-line;
            opacity: 0;
            transform: translateY(20px);
        }

        .poem-line {
            margin-bottom: 1.8rem;
            display: block;
            opacity: 0;
            transform: translateY(10px);
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .camera-container {
                max-width: 100%;
            }
            
            #camera-preview {
                height: 400px;
            }
            
            .love-meter-title, .poem-title {
                font-size: 2rem;
            }
            
            .poem-content {
                font-size: 1.1rem;
                line-height: 1.8;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 0 16px;
            }
            
            #camera-preview {
                height: 350px;
            }
            
            .love-percentage {
                font-size: 3.5rem;
                min-height: 100px;
            }
            
            .poem-line {
                margin-bottom: 1.4rem;
            }
        }
    </style>
</head>
<body>
    <!-- Landing Page -->
    <section class="landing-page" id="landing-page">
        <h1 class="title">Afi's Love to Ilyan</h1>
        <p class="subtitle">A monochrome love letter captured through a single moment.</p>
        <button class="btn" id="open-camera-btn">Open Camera</button>
    </section>

    <!-- Camera System -->
    <section class="camera-section container" id="camera-section">
        <div class="camera-container">
            <div id="camera-preview">
                <div class="camera-placeholder" id="camera-placeholder">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M4 4h3l2-2h6l2 2h3a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2zm8 3a5 5 0 1 0 0 10 5 5 0 0 0 0-10zm0 2a3 3 0 1 1 0 6 3 3 0 0 1 0-6z"/>
                    </svg>
                    <p>Camera is ready to capture your moment</p>
                </div>
                <video id="video" autoplay playsinline></video>
            </div>
            <button id="capture-btn"></button>
        </div>
    </section>

    <!-- Photo Display -->
    <section class="container photo-container" id="photo-container">
        <div class="photo-frame">
            <img id="captured-photo" src="" alt="Captured moment of love">
        </div>
    </section>

    <!-- Love Meter -->
    <section class="container love-meter-section" id="love-meter-section">
        <h2 class="love-meter-title">Love Meter</h2>
        <div class="love-percentage" id="love-percentage"></div>
        <p class="love-description" id="love-description"></p>
    </section>

    <!-- Poem -->
    <section class="container poem-section" id="poem-section">
        <h2 class="poem-title">For Ilyan</h2>
        <div class="poem-content" id="poem-content"></div>
    </section>

    <script>
        // DOM Elements
        const landingPage = document.getElementById('landing-page');
        const cameraSection = document.getElementById('camera-section');
        const photoContainer = document.getElementById('photo-container');
        const loveMeterSection = document.getElementById('love-meter-section');
        const poemSection = document.getElementById('poem-section');
        const openCameraBtn = document.getElementById('open-camera-btn');
        const cameraPreview = document.getElementById('camera-preview');
        const video = document.getElementById('video');
        const captureBtn = document.getElementById('capture-btn');
        const cameraPlaceholder = document.getElementById('camera-placeholder');
        const capturedPhoto = document.getElementById('captured-photo');
        const lovePercentage = document.getElementById('love-percentage');
        const loveDescription = document.getElementById('love-description');
        const poemContent = document.getElementById('poem-content');

        // Camera variables
        let stream = null;
        let capturedImageData = null;

        // Open camera when button is clicked
        openCameraBtn.addEventListener('click', () => {
            // Hide landing page with fade out
            landingPage.style.opacity = '0';
            setTimeout(() => {
                landingPage.style.display = 'none';
                
                // Show camera section with fade in
                cameraSection.style.display = 'flex';
                setTimeout(() => {
                    cameraSection.style.opacity = '1';
                }, 50);
                
                // Initialize camera
                initializeCamera();
            }, 500);
        });

        // Initialize camera
        async function initializeCamera() {
            try {
                // Request camera access
                stream = await navigator.mediaDevices.getUserMedia({ 
                    video: { facingMode: 'user' },
                    audio: false 
                });
                
                // Set video source to camera stream
                video.srcObject = stream;
                video.style.display = 'block';
                
                // Hide placeholder and show capture button
                cameraPlaceholder.style.display = 'none';
                captureBtn.style.display = 'block';
                
                // Add animation to camera preview
                cameraPreview.style.transition = 'all 0.8s ease';
                cameraPreview.style.backgroundColor = 'transparent';
            } catch (error) {
                console.error('Error accessing camera:', error);
                cameraPlaceholder.innerHTML = `
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2zm0 2a8 8 0 1 0 0 16 8 8 0 0 0 0-16zm0 3a5 5 0 1 1 0 10 5 5 0 0 1 0-10z"/>
                    </svg>
                    <p>Camera access required to capture your moment</p>
                    <p style="margin-top: 10px; font-size: 0.9rem;">Please enable camera permissions and refresh</p>
                `;
            }
        }

        // Capture photo
        captureBtn.addEventListener('click', () => {
            capturePhoto();
        });

        function capturePhoto() {
            // Create canvas to capture image from video
            const canvas = document.createElement('canvas');
            const context = canvas.getContext('2d');
            
            // Set canvas dimensions to match video
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            
            // Draw current video frame to canvas
            context.drawImage(video, 0, 0, canvas.width, canvas.height);
            
            // Get image data
            capturedImageData = canvas.toDataURL('image/png');
            
            // Stop camera stream
            if (stream) {
                stream.getTracks().forEach(track => track.stop());
            }
            
            // Hide camera section
            cameraSection.style.opacity = '0';
            setTimeout(() => {
                cameraSection.style.display = 'none';
                
                // Show captured photo
                showCapturedPhoto();
            }, 500);
        }

        function showCapturedPhoto() {
            // Set captured photo source
            capturedPhoto.src = capturedImageData;
            
            // Show photo container
            photoContainer.style.display = 'block';
            setTimeout(() => {
                photoContainer.style.opacity = '1';
                
                // Animate photo frame
                const photoFrame = document.querySelector('.photo-frame');
                setTimeout(() => {
                    photoFrame.style.transform = 'translateY(0)';
                    
                    // Show love meter after delay
                    setTimeout(showLoveMeter, 800);
                }, 200);
            }, 100);
        }

        function showLoveMeter() {
            // Show love meter section
            loveMeterSection.style.display = 'block';
            setTimeout(() => {
                loveMeterSection.style.opacity = '1';
                
                // Generate random love percentage
                const loveValues = [
                    { percentage: "100%", description: "Perfectly Complete" },
                    { percentage: "257%", description: "Beyond Measure" },
                    { percentage: "512%", description: "Infinite In Essence" },
                    { percentage: "842%", description: "Transcendent Devotion" },
                    { percentage: "1000%", description: "Overflowing Beyond Reason" },
                    { percentage: "âˆž", description: "Beyond All Measures" }
                ];
                
                const randomLove = loveValues[Math.floor(Math.random() * loveValues.length)];
                
                // Animate love percentage
                setTimeout(() => {
                    lovePercentage.textContent = `Love Percentage: ${randomLove.percentage}`;
                    lovePercentage.style.opacity = '1';
                    lovePercentage.style.transform = 'translateY(0)';
                    lovePercentage.style.transition = 'opacity 1.5s ease, transform 1.2s ease';
                    
                    // Animate love description
                    setTimeout(() => {
                        loveDescription.textContent = randomLove.description;
                        loveDescription.style.opacity = '1';
                        loveDescription.style.transform = 'translateY(0)';
                        loveDescription.style.transition = 'opacity 1.5s ease 0.3s, transform 1.2s ease 0.3s';
                        
                        // Show poem after delay
                        setTimeout(showPoem, 1500);
                    }, 500);
                }, 300);
            }, 100);
        }

        function showPoem() {
            // Show poem section
            poemSection.style.display = 'block';
            setTimeout(() => {
                poemSection.style.opacity = '1';
                
                // Generate poem
                const poemLines = [
                    "In the silence between our miles, your name folds light into my days,",
                    "And every shadow learns the shape of your tenderness.",
                    "",
                    "I trace the constellations of your thoughts in morning's quiet,",
                    "Find your reflection in the spaces between raindrops,",
                    "Your voice, a gentle tide that calms my restless shores.",
                    "",
                    "This love is not measured in moments but in eternities,",
                    "Not in words but in the quiet understanding",
                    "That breathes between shared glances and unspoken promises.",
                    "",
                    "You are the steady rhythm in life's changing melody,",
                    "The constant in my equations of chaos and grace,",
                    "The sanctuary where my soul finds its true north.",
                    "",
                    "I carry you in the quiet corners of my being,",
                    "Where love grows deep roots in fertile silence,",
                    "Blossoming into something both timeless and new,",
                    "A garden tended with devotion's gentle hands.",
                    "",
                    "Our connection writes itself in invisible ink,",
                    "On the parchment of shared breaths and intertwined dreams,",
                    "A story too profound for ordinary language,",
                    "Yet understood completely in the grammar of the heart.",
                    "",
                    "In every sunrise, I find your warmth,",
                    "In every dusk, your peaceful presence.",
                    "You are the poem my heart writes without ceasing,",
                    "The beautiful, endless verse of Afi's love for Ilyan."
                ];
                
                // Display poem lines with staggered animation
                poemContent.innerHTML = '';
                
                poemLines.forEach((line, index) => {
                    const lineElement = document.createElement('div');
                    lineElement.className = 'poem-line';
                    lineElement.textContent = line;
                    poemContent.appendChild(lineElement);
                    
                    // Animate each line with delay
                    setTimeout(() => {
                        lineElement.style.opacity = '1';
                        lineElement.style.transform = 'translateY(0)';
                        lineElement.style.transition = 'opacity 0.8s ease, transform 0.8s ease';
                    }, index * 150);
                });
            }, 100);
        }

        // Handle page load animations
        window.addEventListener('load', () => {
            // Add some delay for landing page animations to feel more cinematic
            setTimeout(() => {
                document.body.style.opacity = '1';
            }, 300);
        });
    </script>
</body>
</html>
